# A playlist generator for social ballroom events.
### For the purposes of this readme, please note the following definitions:
* ### Song: an individual piece of music, irrespective of whatever dance(s) may be associated with it
* ### Dance (n): a categorical identity for a collection of bodily motions that may be done in rhythm or in time with a **song**
* ### Style (n): a categorical identity for a collection of **dances** contextually interrelated by competitive definitions

### "Oye Como Va" is a song. The cha-cha is a dance. International Latin is a style containing five dances, of which one is the cha-cha.
### Please note that colloquial language will often blur the lines between hard definitions, often used as lexical shorthand to more quickly get a point across. For example, the phrase, "'Oye Como Va' is a cha-cha" is shorthand for "'Oye Como Va' is a song to which you can dance the cha-cha".

---

## Introduction
Creating a playlist for a ballroom social takes a certain artistry to ensure that said playlist meets a large number of criteria, many of which are unwritten. The efforts required to do so can be extensive. Furthermore, because different social events may have different themes, necessitating slightly different song choices between different playlists, it is often not feasible to reuse any one playlist for a different social event without completely redoing the entire song order. This app is designed to randomly generate a playlist subject to a number of rules. Future iterations of this app will scrape Spotify playlists, directly create Spotify playlists, allow for in-place song replacement, include a list of preferential songs to populate randomly and evenly throughout the event, create themed blocks of songs within the playlist, etc.
Our conception of a ballroom playlist is as follows:
1. The 19 competitive dances are condensed wherever stylistic similarities are possible: e.g., Standard Waltz and Smooth Waltz are simply "Waltz". Furthermore, Bolero/Latin Rumba, Swing/Jive, and Salsa/Mambo are combined. All dances are organized simply into two categories corresponding generally to Ballroom or Latin (currently called ```smoothStandard``` and ```rhythmLatin```). Paso Doble is excluded from the list, to be handled separately.
2. On top of the competitive dances, there is also a small percentage of non-competitive social dances (e.g. West Coast Swing, Hustle, Bachata, etc.), currently handled by ```social```. These are currently programmed to occur at a fixed time interval ```timeToSocial```, e.g. every ~25 minutes or so. These dances work on a sort of reducing-pool die. The user is responsible for weighting each dance to their desired odds, based on the maximum number of times they wish to have that dance occur. Every time a social dance is called for, the app will roll for a dance based on these weights. Once a dance is selected, a single occurrence of that dance is removed from the pool. For instance, if Polka, Hustle, and Bachata are weighted 1, 1, and 3, respectively, this indicates that this particular event will have, at maximum, one Polka, one Hustle, and three Bachatas, with the chance of rolling a Bachata naturally higher than the other two at start. If the first social dance is a Bachata, then the odds become 1, 1, and 2; respectively; if the second social dance is another Bachata, then the odds become 1, 1, and 1, respectively.
3. There will be a break at the halfway mark for line dancing, for dancers from the greater community that may not be as comfortable and/or familiar with partner dancing. Currently, this is hardcoded to be 3 line dances.
4. Due to Paso Doble's uniquely choreographically tight requirements, it will occur exactly once during the social, at ```pasoLocation``` (e.g. ```pasoLocation = 0.7``` means that the Paso Doble will occur at about 70% of the way through the night). There is also an additional condition that ensures it does not happen immediately after the line dance break.
5. Many social events have a theme: e.g. Hollywood, Roarin' Twenties, etc. Furthermore, some social events have themed dances: e.g. Roarin' Twenties may lean towards using American swing dances (Foxtrot, Quickstep, Swing, Jive). It can be difficult to ensure that a playlist is populated with enough songs that match the theme, without feeling repetitive and boring. Consider that by default, the 19 competitive dances collapse into 11 social dances; thus, a single dance will occur slightly less than 10% of the time. Therefore, even increasing the occurrence of a single dance to 25% will make it feel as if it occurs twice as much as other dances. As such, the limits on the occurrence of thematic dances may be lower than expected. For event themes without focusing on particular dances, thematic dances are weighted such that they occur at a rate between ```fractionThemeMin``` and ```fractionThemeMax```; by default, this is 25% to 40% of the time. Event themes that have focus on particular dances are, by default, weighted 20% to 25% of the time; furthermore, these dances should be added to ```themeDances``` to exclude them from the style reset handler (to be explained below). Lastly, if a social event has a theme, the first two songs will always be guaranteed to match that theme.
6. Ballroom and Latin dances are interspersed; there should not be a sense of having any competitive 4- or 5-dance rounds. However, we believe that playlists should also not exclusively alternate between styles, as stylistic momentum (i.e. having multiple Ballroom or Latin dances in a row) can be a strongly positive feeling, plus gives a sense of having blocks of similar dances. The maximum number of similarly styled dances in a row is ```maxInARow```; the default is ```3```. The app will locally randomize a block length up to this maximum; i.e., there will be blocks of similar styles between 1 and 3 songs long. This block length will only be rerolled after BOTH styles have been executed. I.e., if the app rolls two Ballroom songs in a row, it will be followed by two Latin songs in a row before rerolling the block length. This pattern will be interrupted by placement of noncompetitive social dances, the line dance break, or the Paso Doble.
7. Separately from interspersion, is the topic of repetition. By default, no dance will be repeated until that entire style is exhausted; e.g., if the first Ballroom dance played is a Waltz, then another Waltz will not play until the Tango, Viennese Waltz, Foxtrot, and Quickstep have all occurred. Furthermore, dances will not repeat in a fixed order within a style. E.g., if you were to write down just the Ballroom dances of the night, you will NOT see a regularly patterned WTVFQ-WTVFQ-WTVFQ; rather, each group of five dances will be randomized, much like the block order in the game *Tetris*. There is further consideration for proximity of identical dances within the overall song order. Generally, it is not a good idea to have one song too close to another song of the same dance, even if both occurrences are interspersed by a different style. This behavior is handled by ```minToRepeat```, which specifies the minimum number of songs between the same dance (the default is ```4```). Lastly, an exception for style repetition can be made if the event's theme relates to specific dances. These themed dances are NOT prevented from repeating until all of the other dances within that style have occurred (i.e. they are excluded from the *Tetris* handing rules); however, they are still subject to ```minToRepeat``` rules.
8. It may be desired to have a specific last dance of the night. If this is the case, the app will leave enough time such that the event will end no later than ```maxSongLength - minSongLength``` overtime. Note that the last song will also be excluded from repition rules (e.g. it is possible for both the penultimate and ultimate songs to be of the same dance)
9. The beginning of a social should be accessible. As such, the first few songs should not be songs that are too difficult and/or too fast. ```earlyCount``` is an integer that defines how many songs should be played before the event is considered to have passed the beginning of the night. ```earlyBlacklist``` specifies which dances will always be excluded in the first ```earlyCount``` songs. By default, Mambo and Quickstep are on the blacklist, and the beginning of a social is defined as 6 songs long.
